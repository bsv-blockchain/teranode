<svg contentStyleType="text/css" height="1197" preserveAspectRatio="none" viewBox="0 0 1056 1197" width="1056" xmlns="http://www.w3.org/2000/svg" zoomAndPan="magnify"><path d="m437.5 165.4199h10v931.7637h-10z" fill="#fff" stroke="#181818"/><path d="m442.5 207.7305h10v889.4531h-10z" fill="#fff" stroke="#181818"/><path d="m447.5 472.9043h10v431.7266h-10z" fill="#fff" stroke="#181818"/><path d="m447.5 978.252h10v118.9316h-10z" fill="#fff" stroke="#181818"/><path d="m330 426.2832h720v486.3477h-720z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m350 564.5254h487v60.6211h-487z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m340 681.457h507v152.5527h-507z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m350 705.7676h487v107.2422h-487z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m74 67.4883v1047.6953" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m282.5 67.4883v1047.6953" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m442 67.4883v1047.6953" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m784 67.4883v1047.6953" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m890 67.4883v1047.6953" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m996 67.4883v1047.6953" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="139" x="5" y="36"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="12" y="56.5352">Blockchain Service</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="139" x="5" y="1114.1836"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="12" y="1134.7188">Blockchain Service</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="52" x="256.5" y="36"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="263.5" y="56.5352">Kafka</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="52" x="256.5" y="1114.1836"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="263.5" y="1134.7188">Kafka</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="165" x="360" y="36"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="367" y="56.5352">Block Persister Service</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="165" x="360" y="1114.1836"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="367" y="1134.7188">Block Persister Service</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="742" y="64.5352">UTXO Store</text><path d="m766.5 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m766.5 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="742" y="1127.7188">UTXO Store</text><path d="m766.5 1140.6719c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m766.5 1140.6719c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="837" y="64.5352">Substree Store</text><path d="m872 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m872 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="837" y="1127.7188">Substree Store</text><path d="m872 1140.6719c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m872 1140.6719c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="953" y="64.5352">File Storage</text><path d="m978.5 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m978.5 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="953" y="1127.7188">File Storage</text><g stroke="#181818"><path d="m978.5 1140.6719c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke-width="1.5"/><path d="m978.5 1140.6719c0 10 18 10 18 10s18 0 18-10" fill="none" stroke-width="1.5"/><path d="m437.5 165.4199h10v931.7637h-10z" fill="#fff"/><path d="m442.5 207.7305h10v889.4531h-10z" fill="#fff"/><path d="m447.5 472.9043h10v431.7266h-10z" fill="#fff"/><path d="m447.5 978.252h10v118.9316h-10z" fill="#fff"/><path d="m270.5 94.7988 10 4-10 4 4-4z" fill="#181818"/><path d="m74.5 98.7988h202"/></g><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="81.5" y="94.0566">Emit Kafka Block Notification</text><path d="m430.5 124.1094 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m282.5 128.1094h154" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="289.5" y="123.3672">Notify Block Received</text><path d="m442.5 152.4199h47" stroke="#181818"/><path d="m489.5 152.4199v13" stroke="#181818"/><path d="m448.5 165.4199h41" stroke="#181818"/><path d="m458.5 161.4199-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="454.5" y="147.6777">blocksFinalHandler(ctx, _, blockBytes)</text><path d="m447.5 194.7305h47" stroke="#181818"/><path d="m494.5 194.7305v13" stroke="#181818"/><path d="m453.5 207.7305h41" stroke="#181818"/><path d="m463.5 203.7305-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="459.5" y="189.9883">persistBlock(ctx, hash, blockBytes)</text><path d="m452.5 242.041h42" stroke="#181818"/><path d="m494.5 242.041v13" stroke="#181818"/><path d="m453.5 255.041h41" stroke="#181818"/><path d="m463.5 251.041-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="459.5" y="237.2988">Create UTXODiff for block</text><path d="m452.5 284.3516h42" stroke="#181818"/><path d="m494.5 284.3516v13" stroke="#181818"/><path d="m453.5 297.3516h41" stroke="#181818"/><path d="m463.5 293.3516-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229" x="459.5" y="279.6094">Add coinbase utxos to the UTXODiff</text><path d="m452.5 326.6621h42" stroke="#181818"/><path d="m494.5 326.6621v13" stroke="#181818"/><path d="m453.5 339.6621h41" stroke="#181818"/><path d="m463.5 335.6621-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="459.5" y="321.9199">Create file for block</text><path d="m452.5 368.9727h42" stroke="#181818"/><path d="m494.5 368.9727v13" stroke="#181818"/><path d="m453.5 381.9727h41" stroke="#181818"/><path d="m463.5 377.9727-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="459.5" y="364.2305">Write block header to block file (.block)</text><path d="m984.5 407.2832 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m452.5 411.2832h538" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="459.5" y="406.541">Persist block file (.block) to storage</text><path d="m330 426.2832h74v7.3106l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m330 426.2832h720v486.3477h-720z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="345" y="439.8516">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="170" x="419" y="438.918">[for each Subtree in the Block]</text><path d="m452.5 459.9043h47" stroke="#181818"/><path d="m499.5 459.9043v13" stroke="#181818"/><path d="m458.5 472.9043h41" stroke="#181818"/><path d="m468.5 468.9043-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="464.5" y="455.1621">processSubtree(ctx, subtreeHash)</text><path d="m457.5 507.2148h42" stroke="#181818"/><path d="m499.5 507.2148v13" stroke="#181818"/><path d="m458.5 520.2148h41" stroke="#181818"/><path d="m468.5 516.2148-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="464.5" y="502.4727">Create file for subtree</text><path d="m878 545.5254 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m457.5 549.5254h426.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="464.5" y="544.7832">Get Subtree from Subtree Store</text><path d="m350 564.5254h74v7.3105l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m350 564.5254h487v60.6211h-487z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="365" y="578.0938">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="170" x="439" y="577.1602">[for each 1000s Tx in Subtree]</text><path d="m772.5 599.1465 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m457.5 603.1465h321" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="464.5" y="598.4043">MetaBatchDecorate Tx batch</text><path d="m468.5 613.1465-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m462.5 617.1465h321" stroke="#181818" stroke-dasharray="2 2"/><path d="m457.5 653.457h42" stroke="#181818"/><path d="m499.5 653.457v13" stroke="#181818"/><path d="m458.5 666.457h41" stroke="#181818"/><path d="m468.5 662.457-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="308" x="464.5" y="648.7148">Write number of txs in the subtree to subtree file</text><path d="m340 681.457h74v7.3106l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m340 681.457h507v152.5527h-507z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="355" y="695.0254">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="180" x="429" y="694.0918">[for each UTXO Meta in Subtree]</text><path d="m350 705.7676h62v7.3105l-10 10h-52z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m350 705.7676h487v107.2422h-487z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="365" y="719.3359">alt</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="427" y="718.4023">[Coinbase Tx]</text><path d="m772.5 740.3887 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m457.5 744.3887h321" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="464.5" y="739.6465">Write Coinbase Tx to subtree fil</text><path d="m350 753.3887h487" stroke="#000" stroke-dasharray="2 2"/><path d="m772.5 771.6992 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m457.5 775.6992h321" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="464.5" y="770.957">Write UTXO Meta to subtree file</text><path d="m772.5 801.0098 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m457.5 805.0098h321" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="464.5" y="800.2676">Process UTXO Meta in UTXODiff</text><path d="m468.5 822.0098-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m462.5 826.0098h321" stroke="#181818" stroke-dasharray="2 2"/><path d="m457.5 862.3203h42" stroke="#181818"/><path d="m499.5 862.3203v13" stroke="#181818"/><path d="m458.5 875.3203h41" stroke="#181818"/><path d="m468.5 871.3203-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="308" x="464.5" y="857.5781">Write number of txs in the subtree to subtree file</text><path d="m984.5 900.6309 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m452.5 904.6309h538" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="459.5" y="899.8887">Persist subtree file (.subtree) to storage</text><path d="m984.5 936.9414 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m452.5 940.9414h538" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="268" x="459.5" y="936.1992">Persist UTXODiff file (.utxodiff) to storage</text><path d="m452.5 965.252h47" stroke="#181818"/><path d="m499.5 965.252v13" stroke="#181818"/><path d="m458.5 978.252h41" stroke="#181818"/><path d="m468.5 974.252-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="464.5" y="960.5098">Compute UTXO Set for the block</text><path d="m457.5 1012.5625h42" stroke="#181818"/><path d="m499.5 1012.5625v13" stroke="#181818"/><path d="m458.5 1025.5625h41" stroke="#181818"/><path d="m468.5 1021.5625-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="464.5" y="1007.8203">Load previous UTXO Set</text><path d="m457.5 1054.873h42" stroke="#181818"/><path d="m499.5 1054.873v13" stroke="#181818"/><path d="m458.5 1067.873h41" stroke="#181818"/><path d="m468.5 1063.873-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="464.5" y="1050.1309">Apply UTXODiff to UTXO Set</text><path d="m984.5 1093.1836 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m442.5 1097.1836h548" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="449.5" y="1092.4414">Write UTXO Set to file (.utxoset)</text><text fill="#888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="152" y="1187.3398">Last Modified On: 7-June-2024</text></svg>
