<svg contentStyleType="text/css" height="762" preserveAspectRatio="none" viewBox="0 0 1059 762" width="1059" xmlns="http://www.w3.org/2000/svg" zoomAndPan="magnify"><path d="m437.5 165.4199h10v497.0371h-10z" fill="#fff" stroke="#181818"/><path d="m442.5 401.2832h10v232.8633h-10z" fill="#fff" stroke="#181818"/><path d="m330 354.6621h572v279.4844h-572z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m340 450.5938h446v176.5527h-446z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m350 560.5254h254v59.6211h-254z" fill="none" stroke="#000" stroke-width="1.5"/><g stroke="#181818"><path d="m74 67.4883v612.9687" stroke-dasharray="5 5" stroke-width=".5"/><path d="m282.5 67.4883v612.9687" stroke-dasharray="5 5" stroke-width=".5"/><path d="m442 67.4883v612.9687" stroke-dasharray="5 5" stroke-width=".5"/><path d="m729 67.4883v612.9687" stroke-dasharray="5 5" stroke-width=".5"/><path d="m839 67.4883v612.9687" stroke-dasharray="5 5" stroke-width=".5"/><path d="m980 67.4883v612.9687" stroke-dasharray="5 5" stroke-width=".5"/><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke-width=".5" width="139" x="5" y="36"/></g><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="12" y="56.5352">Blockchain Service</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="139" x="5" y="679.457"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="12" y="699.9922">Blockchain Service</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="52" x="256.5" y="36"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="263.5" y="56.5352">Kafka</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="52" x="256.5" y="679.457"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="263.5" y="699.9922">Kafka</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="165" x="360" y="36"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="367" y="56.5352">Block Persister Service</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="165" x="360" y="679.457"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="367" y="699.9922">Block Persister Service</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="683" y="64.5352">TxMetaStore</text><path d="m711.5 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m711.5 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="683" y="692.9922">TxMetaStore</text><path d="m711.5 705.9453c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m711.5 705.9453c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="786" y="64.5352">Substree Store</text><path d="m821 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m821 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="786" y="692.9922">Substree Store</text><path d="m821 705.9453c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m821 705.9453c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="902" y="64.5352">Decorated Block Store</text><path d="m962 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m962 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="902" y="692.9922">Decorated Block Store</text><path d="m962 705.9453c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m962 705.9453c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><path d="m437.5 165.4199h10v497.0371h-10z" fill="#fff" stroke="#181818"/><path d="m442.5 401.2832h10v232.8633h-10z" fill="#fff" stroke="#181818"/><path d="m270.5 94.7988 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m74.5 98.7988h202" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="81.5" y="94.0566">Emit Kafka Block Notification</text><path d="m430.5 124.1094 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m282.5 128.1094h154" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="289.5" y="123.3672">Notify Block Received</text><path d="m442.5 152.4199h47" stroke="#181818"/><path d="m489.5 152.4199v13" stroke="#181818"/><path d="m448.5 165.4199h41" stroke="#181818"/><path d="m458.5 161.4199-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="454.5" y="147.6777">blockFinalHandler(ctx, _, blockBytes)</text><path d="m447.5 199.7305h42" stroke="#181818"/><path d="m489.5 199.7305v13" stroke="#181818"/><path d="m448.5 212.7305h41" stroke="#181818"/><path d="m458.5 208.7305-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="454.5" y="194.9883">Create file for block</text><path d="m447.5 242.041h42" stroke="#181818"/><path d="m489.5 242.041v13" stroke="#181818"/><path d="m448.5 255.041h41" stroke="#181818"/><path d="m458.5 251.041-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="454.5" y="237.2988">Write block header to file</text><path d="m447.5 284.3516h42" stroke="#181818"/><path d="m489.5 284.3516v13" stroke="#181818"/><path d="m448.5 297.3516h41" stroke="#181818"/><path d="m458.5 293.3516-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="454.5" y="279.6094">Write number of block transactions to file</text><path d="m447.5 326.6621h42" stroke="#181818"/><path d="m489.5 326.6621v13" stroke="#181818"/><path d="m448.5 339.6621h41" stroke="#181818"/><path d="m458.5 335.6621-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="454.5" y="321.9199">Write Coinbase Tx to file</text><path d="m330 354.6621h74v7.3106l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m330 354.6621h572v279.4844h-572z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="345" y="368.2305">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="170" x="419" y="367.2969">[for each Subtree in the Block]</text><path d="m447.5 388.2832h47" stroke="#181818"/><path d="m494.5 388.2832v13" stroke="#181818"/><path d="m453.5 401.2832h41" stroke="#181818"/><path d="m463.5 397.2832-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="459.5" y="383.541">processSubtree(ctx, subtreeHash)</text><path d="m827 431.5938 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m452.5 435.5938h380.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="459.5" y="430.8516">Get Subtree from Subtree Store</text><path d="m340 450.5938h74v7.3105l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m340 450.5938h446v176.5527h-446z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="355" y="464.1621">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="170" x="429" y="463.2285">[for each 1000s Tx in Subtree]</text><path d="m717.5 485.2148 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m452.5 489.2148h271" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="459.5" y="484.4727">MetaBatchDecorate Tx batch</text><path d="m463.5 499.2148-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m457.5 503.2148h271" stroke="#181818" stroke-dasharray="2 2"/><path d="m452.5 532.5254h42" stroke="#181818"/><path d="m494.5 532.5254v13" stroke="#181818"/><path d="m453.5 545.5254h41" stroke="#181818"/><path d="m463.5 541.5254-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="459.5" y="527.7832">Checks if Tx is not Coinbase Tx</text><path d="m350 560.5254h62v7.3105l-10 10h-52z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m350 560.5254h254v59.6211h-254z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="365" y="574.0938">alt</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="172" x="427" y="573.1602">[if Tx is not Coinbase Tx then]</text><path d="m452.5 599.1465h42" stroke="#181818"/><path d="m494.5 599.1465v13" stroke="#181818"/><path d="m453.5 612.1465h41" stroke="#181818"/><path d="m463.5 608.1465-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="459.5" y="594.4043">Write Tx to file</text><path d="m968 658.457 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m442.5 662.457h531.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="449.5" y="657.7148">Persist block file to storage</text><text fill="#888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="167" y="752.6133">Last Modified On: 15-March-2024</text></svg>
