@startuml
participant Client
participant "RPC Server" as RPC
participant "Block Assembly Client" as BlockAssembly

Client -> RPC : GetMiningCandidateCmd()
activate RPC

RPC -> BlockAssembly : GetMiningCandidate(context)
activate BlockAssembly
BlockAssembly --> RPC : return MiningCandidate or error
deactivate BlockAssembly

alt If Retrieval Fails
    RPC -> Client : Return error
else If Retrieval Succeeds
    RPC -> Client : Return MiningCandidate
    note right
    Response fields:
    - id: Hex-encoded mining candidate ID
    - prevhash: Previous block hash
    - coinbaseValue: Coinbase value
    - version: Block version
    - nBits: Encoded difficulty target
    - time: Current timestamp
    - height: Block height
    - num_tx: Transaction count
    - sizeWithoutCoinbase: Block size
    - merkleProof: Merkle proof hashes
    - coinbase: Optional coinbase tx
    end note
end

deactivate RPC

left footer Last Modified On: %date("dd-MMM-yyyy")

@enduml
