<svg contentStyleType="text/css" height="1418" preserveAspectRatio="none" viewBox="0 0 1948 1418" width="1948" xmlns="http://www.w3.org/2000/svg" zoomAndPan="magnify"><path d="m355.5 101.2871h10v1229.1797h-10z" fill="#fff" stroke="#181818"/><path d="m600.5 415.7031h10v915.7637h-10z" fill="#fff" stroke="#181818"/><path d="m605.5 453.0137h10v176.5527h-10z" fill="#fff" stroke="#181818"/><path d="m605.5 717.498h10v48.3105h-10z" fill="#fff" stroke="#181818"/><path d="m605.5 933.0508h10v383.416h-10z" fill="#fff" stroke="#181818"/><path d="m610.5 1132.9141h10v122.9316h-10z" fill="#fff" stroke="#181818"/><path d="m615.5 1175.2246h10v73.6211h-10z" fill="#fff" stroke="#181818"/><path d="m1107.5 213.5293h10v29.3105h-10z" fill="#fff" stroke="#181818"/><path d="m1251 130.5977h10v29.3105h-10z" fill="#fff" stroke="#181818"/><path d="m1251 272.1504h10v29.3105h-10z" fill="#fff" stroke="#181818"/><path d="m1251 650.877h10v29.3105h-10z" fill="#fff" stroke="#181818"/><path d="m1251 838.4297h10v14h-10z" fill="#fff" stroke="#181818"/><path d="m1347.5 795.1191h10v14h-10z" fill="#fff" stroke="#181818"/><path d="m1347.5 967.3613h10v103.9316h-10z" fill="#fff" stroke="#181818"/><path d="m1534.5 511.6348h10v29.3105h-10z" fill="#fff" stroke="#181818"/><path d="m1644.5 751.8086h10v14h-10z" fill="#fff" stroke="#181818"/><path d="m1737 881.7402h10v14h-10z" fill="#fff" stroke="#181818"/><path d="m255.5 174.9082h1686.5v1148.5586h-1686.5z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m265.5 316.4609h1666.5v46.6211h-1666.5z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m265.5 377.082h1518.5v939.3848h-1518.5z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m514 473.0137h1085v149.5527h-1085z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m524 555.9453h382.5v59.6211h-382.5z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m1321.5 982.3613h295v75.9316h-295z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m514 1086.293h1206v162.5527h-1206z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m524 1195.2246h1186v46.6211h-1186z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m524 1262.8457h807.5v46.6211h-807.5z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m87 69.9766v1270.4902" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m360.5 69.9766v1270.4902" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m605 69.9766v1270.4902" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m1112.5 69.9766v1270.4902" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m1255.5 69.9766v1270.4902" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m1352.5 69.9766v1270.4902" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m1539 69.9766v1270.4902" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m1649 69.9766v1270.4902" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m1742 69.9766v1270.4902" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m1853 69.9766v1270.4902" stroke="#181818" stroke-dasharray="5 5" stroke-width=".5"/><path d="m10 27h155c5 0 5 21.4883 5 21.4883s0 21.4883-5 21.4883h-155c-5 0-5-21.4883-5-21.4883s0-21.4883 5-21.4883" fill="#e2e2f0" stroke="#181818" stroke-width=".5"/><path d="m165 27c-5 0-5 21.4883-5 21.4883 0 21.4883 5 21.4883 5 21.4883" fill="none" stroke="#181818" stroke-width=".5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="32.5" y="45.5352">blockFoundCh</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="10" y="62.0234">Block Found Channel</text><path d="m10 1339.4668h155c5 0 5 21.4883 5 21.4883s0 21.4883-5 21.4883h-155c-5 0-5-21.4883-5-21.4883s0-21.4883 5-21.4883" fill="#e2e2f0" stroke="#181818" stroke-width=".5"/><path d="m165 1339.4668c-5 0-5 21.4883-5 21.4883 0 21.4883 5 21.4883 5 21.4883" fill="none" stroke="#181818" stroke-width=".5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="32.5" y="1358.002">blockFoundCh</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="10" y="1374.4902">Block Found Channel</text><rect fill="#e2e2f0" height="46.9766" rx="2.5" stroke="#181818" stroke-width=".5" width="170" x="275.5" y="22"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="282.5" y="42.5352">Block Validation Server</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="323" y="59.0234">(Server.go)</text><rect fill="#e2e2f0" height="46.9766" rx="2.5" stroke="#181818" stroke-width=".5" width="170" x="275.5" y="1339.4668"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="282.5" y="1360.002">Block Validation Server</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="323" y="1376.4902">(Server.go)</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="548" y="50.5352">Block Validation</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="534" y="67.0234">(BlockValidation.go)</text><ellipse cx="605.5" cy="21" fill="#e2e2f0" rx="12" ry="12" stroke="#181818" stroke-width=".5"/><path d="m593.5 35h24" stroke="#181818" stroke-width=".5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="548" y="1353.002">Block Validation</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="534" y="1369.4902">(BlockValidation.go)</text><ellipse cx="605.5" cy="1388.4434" fill="#e2e2f0" rx="12" ry="12" stroke="#181818" stroke-width=".5"/><path d="m593.5 1402.4434h24" stroke="#181818" stroke-width=".5"/><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="136" x="1044.5" y="38.4883"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1051.5" y="59.0234">Util HTTP Request</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="136" x="1044.5" y="1339.4668"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1051.5" y="1360.002">Util HTTP Request</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="131" x="1190.5" y="38.4883"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1197.5" y="59.0234">Blockchain Client</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="131" x="1190.5" y="1339.4668"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1197.5" y="1360.002">Blockchain Client</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="1331.5" y="67.0234">Block</text><ellipse cx="1352.5" cy="37.4883" fill="#e2e2f0" rx="12" ry="12" stroke="#181818" stroke-width=".5"/><path d="m1340.5 51.4883h24" stroke="#181818" stroke-width=".5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="1331.5" y="1353.002">Block</text><ellipse cx="1352.5" cy="1371.9551" fill="#e2e2f0" rx="12" ry="12" stroke="#181818" stroke-width=".5"/><path d="m1340.5 1385.9551h24" stroke="#181818" stroke-width=".5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1490" y="67.0234">Subtree Store</text><path d="m1521.5 17.4883c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1521.5 17.4883c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1490" y="1353.002">Subtree Store</text><path d="m1521.5 1365.9551c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1521.5 1365.9551c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1599" y="67.0234">Tx Meta Store</text><path d="m1631.5 17.4883c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1631.5 17.4883c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1599" y="1353.002">Tx Meta Store</text><path d="m1631.5 1365.9551c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1631.5 1365.9551c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="1710" y="67.0234">Tx Store</text><path d="m1724 17.4883c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1724 17.4883c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="1710" y="1353.002">Tx Store</text><path d="m1724 1365.9551c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1724 1365.9551c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><path d="m1789 27h128c5 0 5 21.4883 5 21.4883s0 21.4883-5 21.4883h-128c-5 0-5-21.4883-5-21.4883s0-21.4883 5-21.4883" fill="#e2e2f0" stroke="#181818" stroke-width=".5"/><path d="m1917 27c-5 0-5 21.4883-5 21.4883 0 21.4883 5 21.4883 5 21.4883" fill="none" stroke="#181818" stroke-width=".5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="1811.5" y="45.5352">catchupCh</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="1789" y="62.0234">Catchup Channel</text><path d="m1789 1339.4668h128c5 0 5 21.4883 5 21.4883s0 21.4883-5 21.4883h-128c-5 0-5-21.4883-5-21.4883s0-21.4883 5-21.4883" fill="#e2e2f0" stroke="#181818" stroke-width=".5"/><path d="m1917 1339.4668c-5 0-5 21.4883-5 21.4883 0 21.4883 5 21.4883 5 21.4883" fill="none" stroke="#181818" stroke-width=".5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="1811.5" y="1358.002">catchupCh</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="1789" y="1374.4902">Catchup Channel</text><g stroke="#181818"><path d="m355.5 101.2871h10v1229.1797h-10z" fill="#fff"/><path d="m600.5 415.7031h10v915.7637h-10z" fill="#fff"/><path d="m605.5 453.0137h10v176.5527h-10z" fill="#fff"/><path d="m605.5 717.498h10v48.3105h-10z" fill="#fff"/><path d="m605.5 933.0508h10v383.416h-10z" fill="#fff"/><path d="m610.5 1132.9141h10v122.9316h-10z" fill="#fff"/><path d="m615.5 1175.2246h10v73.6211h-10z" fill="#fff"/><path d="m1107.5 213.5293h10v29.3105h-10z" fill="#fff"/><path d="m1251 130.5977h10v29.3105h-10z" fill="#fff"/><path d="m1251 272.1504h10v29.3105h-10z" fill="#fff"/><path d="m1251 650.877h10v29.3105h-10z" fill="#fff"/><path d="m1251 838.4297h10v14h-10z" fill="#fff"/><path d="m1347.5 795.1191h10v14h-10z" fill="#fff"/><path d="m1347.5 967.3613h10v103.9316h-10z" fill="#fff"/><path d="m1534.5 511.6348h10v29.3105h-10z" fill="#fff"/><path d="m1644.5 751.8086h10v14h-10z" fill="#fff"/><path d="m1737 881.7402h10v14h-10z" fill="#fff"/><path d="m343.5 97.2871 10 4-10 4 4-4z" fill="#181818"/><path d="m87.5 101.2871h262"/></g><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="94.5" y="96.5449">processBlockFound(ctx, hash, baseURL)</text><path d="m1239 126.5977 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m365.5 130.5977h879.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="372.5" y="125.8555">GetBlockExists(ctx, hash)</text><path d="m376.5 155.9082-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m370.5 159.9082h884.5" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="382.5" y="155.166">exists / not exists</text><path d="m255.5 174.9082h62v7.3106l-10 10h-52z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m255.5 174.9082h1686.5v1148.5586h-1686.5z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="270.5" y="188.4766">alt</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="233" x="332.5" y="187.543">[Not Exists - Start the Validation process]</text><path d="m1095.5 209.5293 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m365.5 213.5293h736" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="372.5" y="208.7871">DoHTTPRequest(ctx, URL)</text><path d="m376.5 238.8398-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m370.5 242.8398h741" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="382.5" y="238.0977">block data</text><path d="m1239 268.1504 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m365.5 272.1504h879.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="308" x="372.5" y="267.4082">GetBlockExists(ctx, block.Header.HashPrevBlock)</text><path d="m376.5 297.4609-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m370.5 301.4609h884.5" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="382.5" y="296.7188">parent exists / not exists</text><path d="m265.5 316.4609h62v7.3106l-10 10h-52z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m265.5 316.4609h1666.5v46.6211h-1666.5z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="280.5" y="330.0293">alt</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="283" x="342.5" y="329.0957">[Parent Not Exists - Kick off the catch up process]</text><path d="m1841 351.082 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m365.5 355.082h1481.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="332" x="372.5" y="350.3398">catchupCh &lt;- processBlockCatchup{block, baseURL}</text><path d="m265.5 377.082h62v7.3106l-10 10h-52z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m265.5 377.082h1518.5v939.3848h-1518.5z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="280.5" y="390.6504">alt</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="249" x="342.5" y="389.7168">[Parent Exists - Proceed with the Validation]</text><path d="m588.5 411.7031 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m365.5 415.7031h229" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="372.5" y="410.9609">ValidateBlock(ctx, block, baseURL)</text><path d="m610.5 440.0137h47" stroke="#181818"/><path d="m657.5 440.0137v13" stroke="#181818"/><path d="m616.5 453.0137h41" stroke="#181818"/><path d="m626.5 449.0137-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="622.5" y="435.2715">validateBlockSubtrees(ctx, block, baseUrl)</text><path d="m514 473.0137h74v7.3105l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m514 473.0137h1085v149.5527h-1085z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="529" y="486.582">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="100" x="603" y="485.6484">[For each Subtree]</text><path d="m1522.5 507.6348 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m615.5 511.6348h913" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="622.5" y="506.8926">Exists(ctx, subtreeHash)</text><path d="m626.5 536.9453-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m620.5 540.9453h918" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="632.5" y="536.2031">exists / not exists</text><path d="m524 555.9453h62v7.3106l-10 10h-52z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m524 555.9453h382.5v59.6211h-382.5z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="539" y="569.5137">alt</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="109" x="601" y="568.5801">[Subtree Not Exists]</text><path d="m615.5 594.5664h42" stroke="#181818"/><path d="m657.5 594.5664v13" stroke="#181818"/><path d="m616.5 607.5664h41" stroke="#181818"/><path d="m626.5 603.5664-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="622.5" y="589.8242">validateSubtree(ctx, subtreeHash, baseURL)</text><path d="m1239 646.877 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m610.5 650.877h634.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="353" x="617.5" y="646.1348">GetBlockHeaders(ctx, block.Header.HashPrevBlock, 100)</text><path d="m621.5 676.1875-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m615.5 680.1875h639.5" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="627.5" y="675.4453">block headers</text><path d="m610.5 704.498h47" stroke="#181818"/><path d="m657.5 704.498v13" stroke="#181818"/><path d="m616.5 717.498h41" stroke="#181818"/><path d="m626.5 713.498-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="622.5" y="699.7559">storeCoinbaseTx(ctx, block)</text><path d="m1632.5 747.8086 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m615.5 751.8086h1023" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="622.5" y="747.0664">Create(ctx, block.CoinbaseTx)</text><path d="m621.5 761.8086-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m615.5 765.8086h1033" stroke="#181818"/><path d="m1335.5 791.1191 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m610.5 795.1191h731" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="323" x="617.5" y="790.377">Valid(ctx, subtreeStore, txMetaStore, blockHeaders)</text><path d="m621.5 805.1191-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m615.5 809.1191h736" stroke="#181818" stroke-dasharray="2 2"/><path d="m1239 834.4297 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m610.5 838.4297h634.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="617.5" y="833.6875">AddBlock(ctx, block, baseURL)</text><path d="m621.5 848.4297-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m615.5 852.4297h639.5" stroke="#181818" stroke-dasharray="2 2"/><path d="m1725 877.7402 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m610.5 881.7402h1120.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="456" x="617.5" y="876.998">Set(ctx, block.CoinbaseTx.TxIDChainHash()[:], block.CoinbaseTx.Bytes())</text><path d="m621.5 891.7402-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m615.5 895.7402h1125.5" stroke="#181818" stroke-dasharray="2 2"/><path d="m610.5 920.0508h47" stroke="#181818"/><path d="m657.5 920.0508v13" stroke="#181818"/><path d="m616.5 933.0508h41" stroke="#181818"/><path d="m626.5 929.0508-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="622.5" y="915.3086">finalizeBlockValidation(ctx, block)</text><path d="m1335.5 963.3613 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m615.5 967.3613h726" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="622.5" y="962.6191">GetSubtrees(subtreeStore)</text><path d="m1321.5 982.3613h74v7.3106l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m1321.5 982.3613h295v75.9316h-295z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="1336.5" y="995.9297">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="201" x="1410.5" y="994.9961">[For each subtree hash in the block]</text><path d="m1527.5 1016.9824 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m1357.5 1020.9824h176" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="1364.5" y="1016.2402">Get(gCtx, subtreeHash[:])</text><path d="m1368.5 1046.293-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m1362.5 1050.293h176" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="1374.5" y="1045.5508">subtree</text><path d="m626.5 1067.293-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m620.5 1071.293h731" stroke="#181818"/><path d="m514 1086.293h74v7.3105l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m514 1086.293h1206v162.5527h-1206z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="529" y="1099.8613">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="171" x="603" y="1098.9277">[For each Subtree in the Block]</text><path d="m615.5 1119.9141h47" stroke="#181818"/><path d="m662.5 1119.9141v13" stroke="#181818"/><path d="m621.5 1132.9141h41" stroke="#181818"/><path d="m631.5 1128.9141-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="627.5" y="1115.1719">updateSubtreesTTL(ctx, block)</text><path d="m620.5 1162.2246h47" stroke="#181818"/><path d="m667.5 1162.2246v13" stroke="#181818"/><path d="m626.5 1175.2246h41" stroke="#181818"/><path d="m636.5 1171.2246-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="473" x="632.5" y="1157.4824">UpdateTxMinedStatus(ctx, u.logger, u.txMetaStore, subtrees, block.Header)</text><path d="m524 1195.2246h74v7.3106l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m524 1195.2246h1186v46.6211h-1186z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="539" y="1208.793">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="194" x="613" y="1207.8594">[For each Node (Tx) in the Subtree]</text><path d="m1637.5 1229.8457 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m625.5 1233.8457h1018" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="422" x="632.5" y="1229.1035">SetMinedMulti(ctx, hashes, blockHeaderHash) ## mark tx as mined</text><path d="m524 1262.8457h62v7.3106l-10 10h-52z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m524 1262.8457h807.5v46.6211h-807.5z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="539" y="1276.4141">alt</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="50" x="601" y="1275.4805">[If Error]</text><path d="m1244 1297.4668 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m615.5 1301.4668h634.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="622.5" y="1296.7246">InvalidateBlock(ctx, block.Header.Hash())</text></svg>
