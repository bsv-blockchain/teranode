<svg contentStyleType="text/css" height="737" preserveAspectRatio="none" viewBox="0 0 2262 737" width="2262" xmlns="http://www.w3.org/2000/svg" zoomAndPan="magnify"><g fill="#fff"><path d="m381.5 98.7988h10v29.3105h-10z" stroke="#181818"/><path d="m748.5 128.1094h10v87.9316h-10z" stroke="#181818"/><path d="m1174.5 216.041h10v433.0371h-10z" stroke="#181818"/><path d="m1943.5 328.2832h10v29.3105h-10z" stroke="#181818"/><path d="m2071 157.4199h10v29.3105h-10z" stroke="#181818"/><path d="m2071 245.3516h10v29.3105h-10z" stroke="#181818"/><path d="m2071 620.0781h10v14h-10z" stroke="#181818"/><path d="m2181 394.9043h10v102.9316h-10z" stroke="#181818"/></g><path d="m1121.5 289.6621h1135v352.416h-1135z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m1131.5 414.9043h1115v75.9316h-1115z" fill="none" stroke="#000" stroke-width="1.5"/><g stroke="#181818" stroke-width=".5"><g stroke-dasharray="5 5"><path d="m24 67.4883v591.5898"/><path d="m386 67.4883v591.5898"/><path d="m753.5 67.4883v591.5898"/><path d="m1179.5 67.4883v591.5898"/><path d="m1823.5 67.4883v591.5898"/><path d="m1948.5 67.4883v591.5898"/><path d="m2075.5 67.4883v591.5898"/><path d="m2185.5 67.4883v591.5898"/></g><rect fill="#e2e2f0" height="30.4883" rx="2.5" width="39" x="5" y="36"/></g><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="12" y="56.5352">P2P</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="39" x="5" y="658.0781"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="12" y="678.6133">P2P</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="167" x="303" y="36"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="310" y="56.5352">Block Validation Client</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="167" x="303" y="658.0781"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="310" y="678.6133">Block Validation Client</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="170" x="668.5" y="36"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="675.5" y="56.5352">Block Validation Server</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="170" x="668.5" y="658.0781"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="675.5" y="678.6133">Block Validation Server</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="76" x="1141.5" y="36"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="1148.5" y="56.5352">Validator</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="76" x="1141.5" y="658.0781"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="1148.5" y="678.6133">Validator</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1776.5" y="64.5352">Subtree Data</text><ellipse cx="1823.5" cy="35" fill="#e2e2f0" rx="12" ry="12" stroke="#181818" stroke-width=".5"/><path d="m1811.5 49h24" stroke="#181818" stroke-width=".5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1776.5" y="671.6133">Subtree Data</text><ellipse cx="1823.5" cy="690.5664" fill="#e2e2f0" rx="12" ry="12" stroke="#181818" stroke-width=".5"/><path d="m1811.5 704.5664h24" stroke="#181818" stroke-width=".5"/><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="136" x="1880.5" y="36"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1887.5" y="56.5352">Util HTTP Request</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="136" x="1880.5" y="658.0781"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1887.5" y="678.6133">Util HTTP Request</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="2026.5" y="64.5352">Subtree Store</text><path d="m2058 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m2058 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="2026.5" y="671.6133">Subtree Store</text><path d="m2058 684.5664c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m2058 684.5664c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="2135.5" y="64.5352">Tx Meta Store</text><path d="m2168 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m2168 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="2135.5" y="671.6133">Tx Meta Store</text><g stroke="#181818"><path d="m2168 684.5664c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke-width="1.5"/><path d="m2168 684.5664c0 10 18 10 18 10s18 0 18-10" fill="none" stroke-width="1.5"/><g fill="#fff"><path d="m381.5 98.7988h10v29.3105h-10z"/><path d="m748.5 128.1094h10v87.9316h-10z"/><path d="m1174.5 216.041h10v433.0371h-10z"/><path d="m1943.5 328.2832h10v29.3105h-10z"/><path d="m2071 157.4199h10v29.3105h-10z"/><path d="m2071 245.3516h10v29.3105h-10z"/><path d="m2071 620.0781h10v14h-10z"/><path d="m2181 394.9043h10v102.9316h-10z"/></g><path d="m369.5 94.7988 10 4-10 4 4-4z" fill="#181818"/><path d="m24.5 98.7988h351"/></g><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="338" x="31.5" y="94.0566">SubtreeFound(ctx, hash, subtreeMessage.DataHubUrl)</text><path d="m736.5 124.1094 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m386.5 128.1094h356" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="338" x="393.5" y="123.3672">SubtreeFound(ctx, hash, subtreeMessage.DataHubUrl)</text><path d="m2059 153.4199 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m758.5 157.4199h1306.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280" x="765.5" y="152.6777">subtreeStore.Exists(spanCtx, subtreeHash[:])</text><path d="m769.5 182.7305-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m763.5 186.7305h1311.5" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="775.5" y="181.9883">subtreeExists / err</text><path d="m1162.5 212.041 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m753.5 216.041h415" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="397" x="760.5" y="211.2988">validateSubtree(subtreeSpanCtx, subtreeHash, req.GetBaseUrl())</text><path d="m2059 241.3516 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m1184.5 245.3516h880.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280" x="1191.5" y="240.6094">subtreeStore.Exists(spanCtx, subtreeHash[:])</text><path d="m1195.5 270.6621-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m1189.5 274.6621h885.5" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="1201.5" y="269.9199">subtreeExists / err</text><path d="m1121.5 289.6621h62v7.3106l-10 10h-52z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m1121.5 289.6621h1135v352.416h-1135z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1136.5" y="303.2305">alt</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="127" x="1198.5" y="302.2969">[subtreeExists is false]</text><path d="m1931.5 324.2832 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m1184.5 328.2832h753" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="1191.5" y="323.541">DoHTTPRequest(spanCtx, url)</text><path d="m1195.5 353.5938-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m1189.5 357.5938h758" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="1201.5" y="352.8516">subtreeBytes / err</text><path d="m1184.5 381.9043h47" stroke="#181818"/><path d="m1231.5 381.9043v13" stroke="#181818"/><path d="m1190.5 394.9043h41" stroke="#181818"/><path d="m1200.5 390.9043-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="1196.5" y="377.1621">Process subtreeBytes</text><path d="m1131.5 414.9043h74v7.3105l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m1131.5 414.9043h1115v75.9316h-1115z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="1146.5" y="428.4727">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96" x="1220.5" y="427.5391">[for each txHash]</text><path d="m2169 449.5254 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m1184.5 453.5254h990.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="1191.5" y="448.7832">txMetaStore.GetMeta(gCtx, &amp;txHash)</text><path d="m1195.5 478.8359-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m1189.5 482.8359h990.5" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="1201.5" y="478.0938">txMeta / err</text><path d="m1184.5 519.1465h42" stroke="#181818"/><path d="m1226.5 519.1465v13" stroke="#181818"/><path d="m1185.5 532.1465h41" stroke="#181818"/><path d="m1195.5 528.1465-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="620" x="1191.5" y="514.4043">processMissingTransactions(ctx, subtreeHash, missingTxHashesCompacted, baseUrl, txMetaSlice)</text><path d="m1811.5 557.457 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m1184.5 561.457h633" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="1191.5" y="556.7148">Add transactions to Subtree</text><path d="m1811.5 586.7676 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m1184.5 590.7676h633" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="1191.5" y="586.0254">AddNode(txHash, txMeta.Fee, txMeta.SizeInBytes)</text><path d="m2059 616.0781 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m1184.5 620.0781h880.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317" x="1191.5" y="615.3359">Set(spanCtx, merkleRoot[:], completeSubtreeBytes)</text><path d="m1195.5 630.0781-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m1189.5 634.0781h885.5" stroke="#181818" stroke-dasharray="2 2"/></svg>
