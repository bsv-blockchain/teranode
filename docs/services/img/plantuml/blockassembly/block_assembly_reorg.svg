<svg contentStyleType="text/css" height="656" preserveAspectRatio="none" viewBox="0 0 940 656" width="940" xmlns="http://www.w3.org/2000/svg" zoomAndPan="magnify"><g fill="#fff"><path d="m404 98.7988h10v29.3105h-10z" stroke="#181818"/><path d="m404 181.7305h10v29.3105h-10z" stroke="#181818"/><path d="m404 271.6621h10v29.3105h-10z" stroke="#181818"/><path d="m544.5 337.2832h10v176.5527h-10z" stroke="#181818"/></g><path d="m10 143.1094h472.5v75.9316h-472.5z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m10 233.041h472.5v75.9316h-472.5z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m472.5 352.2832h304v59.6211h-304z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m472.5 425.9043h367v59.6211h-367z" fill="none" stroke="#000" stroke-width="1.5"/><g stroke="#181818" stroke-width=".5"><g stroke-dasharray="5 5"><path d="m81 67.4883v506.6582"/><path d="m408.5 67.4883v506.6582"/><path d="m549.5 67.4883v506.6582"/><path d="m839 67.4883v506.6582"/><path d="m918 67.4883v506.6582"/></g><rect fill="#e2e2f0" height="30.4883" rx="2.5" width="122" x="20" y="36"/></g><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="27" y="56.5352">BlockAssembler</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="122" x="20" y="573.1465"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="27" y="593.6816">BlockAssembler</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="127" x="345.5" y="36"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="352.5" y="56.5352">BlockchainClient</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="127" x="345.5" y="573.1465"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="352.5" y="593.6816">BlockchainClient</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="134" x="482.5" y="36"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="489.5" y="56.5352">SubtreeProcessor</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="134" x="482.5" y="573.1465"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="489.5" y="593.6816">SubtreeProcessor</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="792" y="64.5352">SubtreeStore</text><path d="m821.5 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m821.5 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="792" y="586.6816">SubtreeStore</text><path d="m821.5 599.6348c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m821.5 599.6348c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="897" y="64.5352">Block</text><ellipse cx="918" cy="35" fill="#e2e2f0" rx="12" ry="12" stroke="#181818" stroke-width=".5"/><path d="m906 49h24" stroke="#181818" stroke-width=".5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="897" y="586.6816">Block</text><g stroke="#181818"><ellipse cx="918" cy="605.6348" fill="#e2e2f0" rx="12" ry="12" stroke-width=".5"/><path d="m906 619.6348h24" stroke-width=".5"/><g fill="#fff"><path d="m404 98.7988h10v29.3105h-10z"/><path d="m404 181.7305h10v29.3105h-10z"/><path d="m404 271.6621h10v29.3105h-10z"/><path d="m544.5 337.2832h10v176.5527h-10z"/></g><path d="m392 94.7988 10 4-10 4 4-4z" fill="#181818"/><path d="m81 98.7988h317"/></g><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="88" y="94.0566">GetBlockHeaders(ctx, header)</text><path d="m92 124.1094-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m86 128.1094h322" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="98" y="123.3672">moveDownBlockHeaders, moveUpBlockHeaders</text><path d="m10 143.1094h74v7.3105l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m10 143.1094h472.5v75.9316h-472.5z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="25" y="156.6777">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="271" x="99" y="155.7441">[For Each BlockHeader in moveUpBlockHeaders]</text><path d="m392 177.7305 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m81 181.7305h317" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="88" y="176.9883">GetBlock(ctx, blockHeader.Hash())</text><path d="m92 207.041-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m86 211.041h322" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="98" y="206.2988">block</text><path d="m10 233.041h74v7.3106l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m10 233.041h472.5v75.9316h-472.5z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="25" y="246.6094">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="288" x="99" y="245.6758">[For Each BlockHeader in moveDownBlockHeaders]</text><path d="m392 267.6621 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m81 271.6621h317" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="88" y="266.9199">GetBlock(ctx, blockHeader.Hash())</text><path d="m92 296.9727-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m86 300.9727h322" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="98" y="296.2305">block</text><path d="m532.5 333.2832 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m81 337.2832h457.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="88" y="332.541">Reorg(moveDownBlocks, moveUpBlocks)</text><path d="m472.5 352.2832h74v7.3106l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m472.5 352.2832h304v59.6211h-304z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="487.5" y="365.8516">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="210" x="561.5" y="364.918">[For Each Block in moveDownBlocks]</text><path d="m554.5 390.9043h42" stroke="#181818"/><path d="m596.5 390.9043v13" stroke="#181818"/><path d="m555.5 403.9043h41" stroke="#181818"/><path d="m565.5 399.9043-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="561.5" y="386.1621">moveDownBlock(ctx, block)</text><path d="m472.5 425.9043h74v7.3105l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m472.5 425.9043h367v59.6211h-367z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="487.5" y="439.4727">loop</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="193" x="561.5" y="438.5391">[For Each Block in moveUpBlocks]</text><path d="m554.5 464.5254h42" stroke="#181818"/><path d="m596.5 464.5254v13" stroke="#181818"/><path d="m555.5 477.5254h41" stroke="#181818"/><path d="m565.5 473.5254-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266" x="561.5" y="459.7832">moveUpBlock(ctx, block, skipNotification)</text><path d="m92 509.8359-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m86 513.8359h462.5" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="98" y="509.0938">reorg completion</text><path d="m81 543.1465h42" stroke="#181818"/><path d="m123 543.1465v13" stroke="#181818"/><path d="m82 556.1465h41" stroke="#181818"/><path d="m92 552.1465-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="88" y="538.4043">Update internal state</text><text fill="#888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="152" y="646.3027">Last Modified On: 10-Jan-2024</text></svg>
