<svg contentStyleType="text/css" height="600" preserveAspectRatio="none" viewBox="0 0 1303 600" width="1303" xmlns="http://www.w3.org/2000/svg" zoomAndPan="magnify"><g fill="#fff" stroke="#181818"><path d="m92 146.4199h10v146.5527h-10z"/><path d="m528.5 292.9727h10v222.1738h-10z"/><path d="m1021.5 322.2832h10v29.3105h-10z"/><path d="m1021.5 405.2148h10v29.3105h-10z"/><path d="m1198.5 463.8359h10v29.3105h-10z"/></g><path d="m10 70.4883h1287v444.6582h-1287z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m20 254.3516h1267v253.7949h-1267z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m440.5 366.5938h836.5v134.5527h-836.5z" fill="none" stroke="#000" stroke-width="1.5"/><g stroke="#181818" stroke-width=".5"><g stroke-dasharray="5 5"><path d="m97 53.4883v478.6582"/><path d="m277.5 53.4883v478.6582"/><path d="m380.5 53.4883v478.6582"/><path d="m533.5 53.4883v478.6582"/><path d="m1026 53.4883v478.6582"/><path d="m1203 53.4883v478.6582"/></g><rect fill="#e2e2f0" height="30.4883" rx="2.5" width="134" x="30" y="22"/></g><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="37" y="42.5352">SubtreeProcessor</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="134" x="30" y="531.1465"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="37" y="551.6816">SubtreeProcessor</text><path d="m250.5 27h55c5 0 5 13.2441 5 13.2441s0 13.2442-5 13.2442h-55c-5 0-5-13.2442-5-13.2442s0-13.2441 5-13.2441" fill="#e2e2f0" stroke="#181818" stroke-width=".5"/><path d="m305.5 27c-5 0-5 13.2441-5 13.2441 0 13.2442 5 13.2442 5 13.2442" fill="none" stroke="#181818" stroke-width=".5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="250.5" y="45.5352">Queue</text><path d="m250.5 531.1465h55c5 0 5 13.2441 5 13.2441s0 13.2442-5 13.2442h-55c-5 0-5-13.2442-5-13.2442s0-13.2441 5-13.2441" fill="#e2e2f0" stroke="#181818" stroke-width=".5"/><path d="m305.5 531.1465c-5 0-5 13.2441-5 13.2441 0 13.2442 5 13.2442 5 13.2442" fill="none" stroke="#181818" stroke-width=".5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="250.5" y="549.6816">Queue</text><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="320.5" y="50.5352">Current SubTree</text><ellipse cx="380.5" cy="21" fill="#e2e2f0" rx="12" ry="12" stroke="#181818" stroke-width=".5"/><path d="m368.5 35h24" stroke="#181818" stroke-width=".5"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="320.5" y="544.6816">Current SubTree</text><ellipse cx="380.5" cy="563.6348" fill="#e2e2f0" rx="12" ry="12" stroke="#181818" stroke-width=".5"/><path d="m368.5 577.6348h24" stroke="#181818" stroke-width=".5"/><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="166" x="450.5" y="22"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="457.5" y="42.5352">Block Assembly Server</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="166" x="450.5" y="531.1465"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="457.5" y="551.6816">Block Assembly Server</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="103" x="975" y="22"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="982" y="42.5352">SubtreeStore</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="103" x="975" y="531.1465"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="982" y="551.6816">SubtreeStore</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="127" x="1140" y="22"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="1147" y="42.5352">BlockchainClient</text><rect fill="#e2e2f0" height="30.4883" rx="2.5" stroke="#181818" stroke-width=".5" width="127" x="1140" y="531.1465"/><text font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="1147" y="551.6816">BlockchainClient</text><g fill="#fff"><path d="m92 146.4199h10v146.5527h-10z" stroke="#181818"/><path d="m528.5 292.9727h10v222.1738h-10z" stroke="#181818"/><path d="m1021.5 322.2832h10v29.3105h-10z" stroke="#181818"/><path d="m1021.5 405.2148h10v29.3105h-10z" stroke="#181818"/><path d="m1198.5 463.8359h10v29.3105h-10z" stroke="#181818"/></g><path d="m10 70.4883h74v7.3105l-10 10h-64z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m10 70.4883h1287v444.6582h-1287z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="25" y="84.0566">loop</text><path d="m108 105.1094-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m102 109.1094h175" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="114" y="104.3672">txReq = queue.dequeue()</text><path d="m97 133.4199h47" stroke="#181818"/><path d="m144 133.4199v13" stroke="#181818"/><path d="m103 146.4199h41" stroke="#181818"/><path d="m113 142.4199-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="109" y="128.6777">addNode(txReq, false)</text><path d="m368.5 176.7305 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m102 180.7305h272.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="109" y="175.9883">AddSubtreeNode(txReq)</text><path d="m368.5 206.041 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m102 210.041h272.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="109" y="205.2988">IsComplete()</text><path d="m113 235.3516-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m107 239.3516h272.5" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="119" y="234.6094">true / false</text><path d="m20 254.3516h62v7.3105l-10 10h-52z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m20 254.3516h1267v253.7949h-1267z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="267.9199">alt</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="133" x="97" y="266.9863">[if Subtree is Complete]</text><path d="m516.5 288.9727 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m97 292.9727h425.5" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304" x="104" y="288.2305">Send currentSubtree through an internal channel</text><path d="m1009.5 318.2832 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m538.5 322.2832h477" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="545.5" y="317.541">Exists(ctx, subtree.RootHash()[:])</text><path d="m549.5 347.5938-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m543.5 351.5938h482" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="555.5" y="346.8516">Exists / not exists</text><path d="m440.5 366.5938h62v7.3105l-10 10h-52z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m440.5 366.5938h836.5v134.5527h-836.5z" fill="none" stroke="#000" stroke-width="1.5"/><text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="455.5" y="380.1621">alt</text><text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="144" x="517.5" y="379.2285">[if Subtree does not exist]</text><path d="m1009.5 401.2148 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m538.5 405.2148h477" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="464" x="545.5" y="400.4727">Set(ctx, subtree.RootHash()[:], subtreeBytes, options.WithTTL(subtreeTTL))</text><path d="m549.5 430.5254-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m543.5 434.5254h482" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="555.5" y="429.7832">Subtree stored</text><path d="m1186.5 459.8359 10 4-10 4 4-4z" fill="#181818" stroke="#181818"/><path d="m538.5 463.8359h654" stroke="#181818"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="641" x="545.5" y="459.0938">SendNotification(ctx, &amp;model.Notification{Type: NotificationType_Subtree, Hash: subtree.RootHash()})</text><path d="m549.5 489.1465-10 4 10 4-4-4z" fill="#181818" stroke="#181818"/><path d="m543.5 493.1465h659" stroke="#181818" stroke-dasharray="2 2"/><text font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="555.5" y="488.4043">Notification sent</text><text fill="#888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="152" y="590.3027">Last Modified On: 10-Jan-2024</text></svg>
