<svg contentStyleType="text/css" height="1062" preserveAspectRatio="none" viewBox="0 0 975 1062" width="975" xmlns="http://www.w3.org/2000/svg" zoomAndPan="magnify"><path d="m0 0h975v1062h-975z" fill="#f0f8ff"/><text fill="#333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="248.9922" x="364.3911" y="28.5352">UTXO Persister - Block Processing</text><path d="m105.623 83.9766h10v916.9395h-10z" fill="#fff" stroke="#181818"/><path d="m576.1895 537.9238h10v87.9316h-10z" fill="#fff" stroke="#181818"/><path d="m576.1895 655.166h10v159.5527h-10z" fill="#fff" stroke="#181818"/><path d="m20 175.5977h524.8052v90.8867h-524.8052z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m10 280.4844h958.7744v713.4316h-958.7744z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m20 304.7949h524.8052v90.8867h-524.8052z" fill="none" stroke="#000" stroke-width="1.5"/><g stroke-width=".5"><path d="m110 73.9766v936.9394" stroke="#181818" stroke-dasharray="5 5"/><path d="m333.7788 73.9766v936.9394" stroke="#181818" stroke-dasharray="5 5"/><path d="m471.0923 73.9766v936.9394" stroke="#181818" stroke-dasharray="5 5"/><path d="m580.8052 73.9766v936.9394" stroke="#181818" stroke-dasharray="5 5"/><path d="m802.4756 73.9766v936.9394" stroke="#181818" stroke-dasharray="5 5"/><path d="m907.8623 73.9766v936.9394" stroke="#181818" stroke-dasharray="5 5"/><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" width="161.2461" x="30" y="42.4883"/></g><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147.2461" x="37" y="63.0234">UTXO Persister Server</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="161.2461" x="30" y="1009.916"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147.2461" x="37" y="1030.4512">UTXO Persister Server</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="130.3135" x="268.7788" y="42.4883"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.3135" x="275.7788" y="63.0234">Blockchain Client</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="130.3135" x="268.7788" y="1009.916"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.3135" x="275.7788" y="1030.4512">Blockchain Client</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="125.7129" x="409.0923" y="42.4883"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.7129" x="416.0923" y="63.0234">Blockchain Store</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="125.7129" x="409.0923" y="1009.916"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.7129" x="416.0923" y="1030.4512">Blockchain Store</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="72.7686" x="544.8052" y="42.4883"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58.7686" x="551.8052" y="63.0234">UTXOSet</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="72.7686" x="544.8052" y="1009.916"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58.7686" x="551.8052" y="1030.4512">UTXOSet</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="89.3867" x="758.4756" y="42.4883"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.3867" x="765.4756" y="63.0234">Block Store</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="89.3867" x="758.4756" y="1009.916"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.3867" x="765.4756" y="1030.4512">Block Store</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="100.9121" x="857.8623" y="42.4883"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.9121" x="864.8623" y="63.0234">Consolidator</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="100.9121" x="857.8623" y="1009.916"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.9121" x="864.8623" y="1030.4512">Consolidator</text><path d="m105.623 83.9766h10v916.9395h-10z" fill="#fff" stroke="#181818"/><path d="m576.1895 537.9238h10v87.9316h-10z" fill="#fff" stroke="#181818"/><path d="m576.1895 655.166h10v159.5527h-10z" fill="#fff" stroke="#181818"/><path d="m115.623 105.2871h42" stroke="#666"/><path d="m157.623 105.2871v13" stroke="#666"/><path d="m116.623 118.2871h41" stroke="#666"/><path d="m126.623 114.2871-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.0693" x="122.623" y="100.5449">trigger(source)</text><path d="m115.623 147.5977h42" stroke="#666"/><path d="m157.623 147.5977v13" stroke="#666"/><path d="m116.623 160.5977h41" stroke="#666"/><path d="m126.623 156.5977-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.2563" x="122.623" y="142.8555">processNextBlock()</text><path d="m20 175.5977h62.1387v7.3105l-10 10h-52.1387z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m20 175.5977h524.8052v90.8867h-524.8052z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="35" y="189.166">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="133.187" x="97.1387" y="188.2324">[using BlockchainStore]</text><path d="m459.9487 210.2188 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m115.623 214.2188h350.3257" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.3608" x="122.623" y="209.4766">GetBestBlockHeader()</text><path d="m20 223.2188h524.8052" stroke="#000" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="137.0918" x="25" y="233.8535">[using BlockchainClient]</text><path d="m321.9355 254.4844 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m115.623 258.4844h212.3125" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.3608" x="122.623" y="253.7422">GetBestBlockHeader()</text><path d="m10 280.4844h62.1387v7.3105l-10 10h-52.1387z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m10 280.4844h958.7744v713.4316h-958.7744z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="25" y="294.0527">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="272.9751" x="87.1387" y="293.1191">[current height is more than 100 blocks behind]</text><path d="m20 304.7949h62.1387v7.3106l-10 10h-52.1387z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m20 304.7949h524.8052v90.8867h-524.8052z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="35" y="318.3633">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="133.187" x="97.1387" y="317.4297">[using BlockchainStore]</text><path d="m459.9487 339.416 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m115.623 343.416h350.3257" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188.7793" x="122.623" y="338.6738">GetBlockHeadersFromHeight()</text><path d="m20 352.416h524.8052" stroke="#000" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="137.0918" x="25" y="363.0508">[using BlockchainClient]</text><path d="m321.9355 383.6816 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m115.623 387.6816h212.3125" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188.7793" x="122.623" y="382.9395">GetBlockHeadersFromHeight()</text><path d="m115.623 423.9922h42" stroke="#666"/><path d="m157.623 423.9922v13" stroke="#666"/><path d="m116.623 436.9922h41" stroke="#666"/><path d="m126.623 432.9922-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87.7817" x="122.623" y="419.25">verifyLastSet()</text><path d="m115.623 466.3027h42" stroke="#666"/><path d="m157.623 466.3027v13" stroke="#666"/><path d="m116.623 479.3027h41" stroke="#666"/><path d="m126.623 475.3027-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.1357" x="122.623" y="461.5605">New Consolidator()</text><path d="m896.3184 504.6133 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m115.623 508.6133h786.6954" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155.3906" x="122.623" y="503.8711">ConsolidateBlockRange()</text><path d="m564.1895 533.9238 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m115.623 537.9238h454.5665" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198.1738" x="122.623" y="533.1816">GetUTXOSetWithDeletionsMap()</text><path d="m791.1689 563.2344 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m586.1895 567.2344h210.9794" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.916" x="593.1895" y="562.4922">Get UTXO deletions</text><path d="m597.1895 592.5449-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m591.1895 596.5449h210.9794" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.3032" x="603.1895" y="591.8027">UTXO deletions</text><path d="m126.623 621.8555-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m120.623 625.8555h459.5665" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224.7324" x="132.623" y="621.1133">Return UTXOSet with deletions map</text><path d="m564.1895 651.166 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m115.623 655.166h454.5665" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.8667" x="122.623" y="650.4238">CreateUTXOSet()</text><path d="m791.1689 680.4766 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m586.1895 684.4766h210.9794" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.8457" x="593.1895" y="679.7344">Get previous block's UTXO set</text><path d="m597.1895 709.7871-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m591.1895 713.7871h210.9794" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163.2363" x="603.1895" y="709.0449">Previous block's UTXO set</text><path d="m586.1895 743.0977h42" stroke="#666"/><path d="m628.1895 743.0977v13" stroke="#666"/><path d="m587.1895 756.0977h41" stroke="#666"/><path d="m597.1895 752.0977-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.9795" x="593.1895" y="738.3555">Apply deletions and additions</text><path d="m791.1689 781.4082 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m586.1895 785.4082h210.9794" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.1665" x="593.1895" y="780.666">Write new UTXO set</text><path d="m126.623 810.7188-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m120.623 814.7188h459.5665" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.1099" x="132.623" y="809.9766">UTXO set created</text><path d="m791.1689 840.0293 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m115.623 844.0293h681.5459" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304.7129" x="122.623" y="839.2871">Delete previous block's UTXOSet (if not skipped)</text><path d="m115.623 873.3398h42" stroke="#666"/><path d="m157.623 873.3398v13" stroke="#666"/><path d="m116.623 886.3398h41" stroke="#666"/><path d="m126.623 882.3398-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.8438" x="122.623" y="868.5977">writeLastHeight()</text><path d="m115.623 915.6504h42" stroke="#666"/><path d="m157.623 915.6504v13" stroke="#666"/><path d="m116.623 928.6504h41" stroke="#666"/><path d="m126.623 924.6504-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.3125" x="122.623" y="910.9082">Trigger next block processing</text><path d="m10 937.6504h958.7744" stroke="#000" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="266.2988" x="15" y="948.2852">[current height is less than 100 blocks behind]</text><path d="m115.623 972.916h42" stroke="#666"/><path d="m157.623 972.916v13" stroke="#666"/><path d="m116.623 985.916h41" stroke="#666"/><path d="m126.623 981.916-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177.2139" x="122.623" y="968.1738">Wait for more confirmations</text><text fill="#333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="155.4346" y="1052.0723">Last Modified On: 24-Feb-2025</text></svg>
