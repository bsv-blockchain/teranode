@startuml
skinparam backgroundColor #F0F8FF
skinparam defaultFontColor #333333
skinparam arrowColor #666666

' Define borders for all elements
skinparam entity {
  BorderColor #666666
  BackgroundColor #DDDDDD
}

skinparam control {
  BorderColor #666666
  BackgroundColor #DDDDDD
}

skinparam participant {
  BorderColor #666666
  BackgroundColor #DDDDDD
}



participant "Block Validation (Server.go)" as Server
participant "BlockValidation.go" as BlockValidation
participant "TxMetaStore" as TxMetaStore

Server -> Server: catchup() or processBlockFound()

Server -> BlockValidation: ValidateBlock(ctx, block, baseUrl)
activate BlockValidation

BlockValidation -> BlockValidation: storeCoinbaseTx(spanCtx, block)

BlockValidation -> TxMetaStore: Create(childSpanCtx, block.CoinbaseTx)
activate TxMetaStore

TxMetaStore --> BlockValidation: Confirmation
deactivate TxMetaStore


BlockValidation --> Server: Block Validated
deactivate BlockValidation

left footer Last Modified On: %date("dd-MMM-yyyy")

@enduml
