<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="778px" preserveAspectRatio="none" style="width:1448px;height:778px;background:#FFFFFF;" version="1.1" viewBox="0 0 1448 778" width="1448px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="161.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="100.6216" y="214.041"/><rect fill="#FFFFFF" height="311.3945" style="stroke:#181818;stroke-width:1.0;" width="10" x="632.1323" y="375.9043"/><rect fill="none" height="594.8105" style="stroke:#000000;stroke-width:1.5;" width="1432.2446" x="10" y="84.4883"/><rect fill="none" height="504.8789" style="stroke:#000000;stroke-width:1.5;" width="1412.2446" x="20" y="167.4199"/><rect fill="none" height="299.0605" style="stroke:#000000;stroke-width:1.5;" width="1319.8452" x="30" y="321.9727"/><rect fill="none" height="164.5078" style="stroke:#000000;stroke-width:1.5;" width="805.5781" x="534.2671" y="449.5254"/><rect fill="none" height="103.8867" style="stroke:#000000;stroke-width:1.5;" width="785.5781" x="544.2671" y="503.1465"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="105" x2="105" y1="67.4883" y2="696.2988"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="384.2075" x2="384.2075" y1="67.4883" y2="696.2988"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="485.0601" x2="485.0601" y1="67.4883" y2="696.2988"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="636.2671" x2="636.2671" y1="67.4883" y2="696.2988"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1133.4526" x2="1133.4526" y1="67.4883" y2="696.2988"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1255.9614" x2="1255.9614" y1="67.4883" y2="696.2988"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1375.8452" x2="1375.8452" y1="67.4883" y2="696.2988"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131.2432" x="40" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.2432" x="47" y="56.5352">SubtreeProcessor</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131.2432" x="40" y="695.2988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.2432" x="47" y="715.834">SubtreeProcessor</text><path d="M358.2075,41 L412.0601,41 C417.0601,41 417.0601,54.2441 417.0601,54.2441 C417.0601,54.2441 417.0601,67.4883 412.0601,67.4883 L358.2075,67.4883 C353.2075,67.4883 353.2075,54.2441 353.2075,54.2441 C353.2075,54.2441 353.2075,41 358.2075,41 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M412.0601,41 C407.0601,41 407.0601,54.2441 407.0601,54.2441 C407.0601,67.4883 412.0601,67.4883 412.0601,67.4883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.8525" x="358.2075" y="59.5352">Queue</text><path d="M358.2075,695.2988 L412.0601,695.2988 C417.0601,695.2988 417.0601,708.543 417.0601,708.543 C417.0601,708.543 417.0601,721.7871 412.0601,721.7871 L358.2075,721.7871 C353.2075,721.7871 353.2075,708.543 353.2075,708.543 C353.2075,708.543 353.2075,695.2988 358.2075,695.2988 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M412.0601,695.2988 C407.0601,695.2988 407.0601,708.543 407.0601,708.543 C407.0601,721.7871 412.0601,721.7871 412.0601,721.7871 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.8525" x="358.2075" y="713.834">Queue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.207" x="427.0601" y="64.5352">Current SubTree</text><ellipse cx="485.6636" cy="35" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="473.6636" x2="497.6636" y1="49" y2="49"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.207" x="427.0601" y="708.834">Current SubTree</text><ellipse cx="485.6636" cy="727.7871" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="473.6636" x2="497.6636" y1="741.7871" y2="741.7871"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165.7305" x="554.2671" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151.7305" x="561.2671" y="56.5352">Block Assembly Server</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165.7305" x="554.2671" y="695.2988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151.7305" x="561.2671" y="715.834">Block Assembly Server</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.5088" x="1083.4526" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.5088" x="1090.4526" y="56.5352">SubtreeStore</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.5088" x="1083.4526" y="695.2988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.5088" x="1090.4526" y="715.834">SubtreeStore</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125.8838" x="1193.9614" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.8838" x="1200.9614" y="56.5352">BlockchainClient</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125.8838" x="1193.9614" y="695.2988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.8838" x="1200.9614" y="715.834">BlockchainClient</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.3994" x="1329.8452" y="64.5352">Remove Map</text><path d="M1358.0449,15 C1358.0449,5 1376.0449,5 1376.0449,5 C1376.0449,5 1394.0449,5 1394.0449,15 L1394.0449,41 C1394.0449,51 1376.0449,51 1376.0449,51 C1376.0449,51 1358.0449,51 1358.0449,41 L1358.0449,15 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1358.0449,15 C1358.0449,25 1376.0449,25 1376.0449,25 C1376.0449,25 1394.0449,25 1394.0449,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.3994" x="1329.8452" y="708.834">Remove Map</text><path d="M1358.0449,721.7871 C1358.0449,711.7871 1376.0449,711.7871 1376.0449,711.7871 C1376.0449,711.7871 1394.0449,711.7871 1394.0449,721.7871 L1394.0449,747.7871 C1394.0449,757.7871 1376.0449,757.7871 1376.0449,757.7871 C1376.0449,757.7871 1358.0449,757.7871 1358.0449,747.7871 L1358.0449,721.7871 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1358.0449,721.7871 C1358.0449,731.7871 1376.0449,731.7871 1376.0449,731.7871 C1376.0449,731.7871 1394.0449,731.7871 1394.0449,721.7871 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="161.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="100.6216" y="214.041"/><rect fill="#FFFFFF" height="311.3945" style="stroke:#181818;stroke-width:1.0;" width="10" x="632.1323" y="375.9043"/><path d="M10,84.4883 L84.4468,84.4883 L84.4468,91.7988 L74.4468,101.7988 L10,101.7988 L10,84.4883 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="594.8105" style="stroke:#000000;stroke-width:1.5;" width="1432.2446" x="10" y="84.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="25" y="98.0566">loop</text><polygon fill="#181818" points="116.6216,119.1094,106.6216,123.1094,116.6216,127.1094,112.6216,123.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="110.6216" x2="384.1338" y1="123.1094" y2="123.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255.5122" x="122.6216" y="118.3672">txReq = queue.dequeue(validFromMillis)</text><polygon fill="#181818" points="1364.0449,148.4199,1374.0449,152.4199,1364.0449,156.4199,1368.0449,152.4199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="105.6216" x2="1370.0449" y1="152.4199" y2="152.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.9595" x="112.6216" y="147.6777">Exists(txReq.node.Hash)</text><path d="M20,167.4199 L82.1387,167.4199 L82.1387,174.7305 L72.1387,184.7305 L20,184.7305 L20,167.4199 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="504.8789" style="stroke:#000000;stroke-width:1.5;" width="1412.2446" x="20" y="167.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="35" y="180.9883">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="125.1143" x="97.1387" y="180.0547">[if not in RemoveMap]</text><line style="stroke:#181818;stroke-width:1.0;" x1="105.6216" x2="152.6216" y1="201.041" y2="201.041"/><line style="stroke:#181818;stroke-width:1.0;" x1="152.6216" x2="152.6216" y1="201.041" y2="214.041"/><line style="stroke:#181818;stroke-width:1.0;" x1="111.6216" x2="152.6216" y1="214.041" y2="214.041"/><polygon fill="#181818" points="121.6216,210.041,111.6216,214.041,121.6216,218.041,117.6216,214.041" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.897" x="117.6216" y="196.2988">addNode(txReq.node, false)</text><polygon fill="#181818" points="473.6636,244.3516,483.6636,248.3516,473.6636,252.3516,477.6636,248.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="110.6216" x2="479.6636" y1="248.3516" y2="248.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.7925" x="117.6216" y="243.6094">AddSubtreeNode(txReq.node)</text><polygon fill="#181818" points="473.6636,273.6621,483.6636,277.6621,473.6636,281.6621,477.6636,277.6621" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="110.6216" x2="479.6636" y1="277.6621" y2="277.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.2314" x="117.6216" y="272.9199">IsComplete()</text><polygon fill="#181818" points="121.6216,302.9727,111.6216,306.9727,121.6216,310.9727,117.6216,306.9727" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="115.6216" x2="484.6636" y1="306.9727" y2="306.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70.1226" x="127.6216" y="302.2305">true / false</text><path d="M30,321.9727 L92.1387,321.9727 L92.1387,329.2832 L82.1387,339.2832 L30,339.2832 L30,321.9727 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="299.0605" style="stroke:#000000;stroke-width:1.5;" width="1319.8452" x="30" y="321.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="45" y="335.541">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="133.853" x="107.1387" y="334.6074">[if Subtree is Complete]</text><polygon fill="#181818" points="620.1323,371.9043,630.1323,375.9043,620.1323,379.9043,624.1323,375.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="105.6216" x2="626.1323" y1="375.9043" y2="375.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.064" x="112.6216" y="355.8516">Send currentSubtree</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.145" x="112.6216" y="371.1621">through newSubtreeChan</text><polygon fill="#181818" points="1121.707,401.2148,1131.707,405.2148,1121.707,409.2148,1125.707,405.2148" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="642.1323" x2="1127.707" y1="405.2148" y2="405.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206.229" x="649.1323" y="400.4727">Exists(ctx, subtree.RootHash()[:])</text><polygon fill="#181818" points="653.1323,430.5254,643.1323,434.5254,653.1323,438.5254,649.1323,434.5254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="647.1323" x2="1132.707" y1="434.5254" y2="434.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.0547" x="659.1323" y="429.7832">Exists / not exists</text><path d="M534.2671,449.5254 L596.4058,449.5254 L596.4058,456.8359 L586.4058,466.8359 L534.2671,466.8359 L534.2671,449.5254 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="164.5078" style="stroke:#000000;stroke-width:1.5;" width="805.5781" x="534.2671" y="449.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="549.2671" y="463.0938">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="146.8242" x="611.4058" y="462.1602">[if Subtree does not exist]</text><polygon fill="#181818" points="1121.707,484.1465,1131.707,488.1465,1121.707,492.1465,1125.707,488.1465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="642.1323" x2="1127.707" y1="488.1465" y2="488.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="467.5747" x="649.1323" y="483.4043">Set(ctx, subtree.RootHash()[:], subtreeBytes, options.WithTTL(subtreeTTL))</text><path d="M544.2671,503.1465 L606.4058,503.1465 L606.4058,510.457 L596.4058,520.457 L544.2671,520.457 L544.2671,503.1465 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="103.8867" style="stroke:#000000;stroke-width:1.5;" width="785.5781" x="544.2671" y="503.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="559.2671" y="516.7148">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="65.1299" x="621.4058" y="515.7813">[if Set fails]</text><line style="stroke:#181818;stroke-width:1.0;" x1="642.1323" x2="684.1323" y1="541.7676" y2="541.7676"/><line style="stroke:#181818;stroke-width:1.0;" x1="684.1323" x2="684.1323" y1="541.7676" y2="554.7676"/><line style="stroke:#181818;stroke-width:1.0;" x1="643.1323" x2="684.1323" y1="554.7676" y2="554.7676"/><polygon fill="#181818" points="653.1323,550.7676,643.1323,554.7676,653.1323,558.7676,649.1323,554.7676" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247.019" x="649.1323" y="537.0254">Add to subtreeRetryChan for later retry</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="544.2671" x2="1329.8452" y1="563.7676" y2="563.7676"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="92.2808" x="549.2671" y="574.4023">[if Set succeeds]</text><polygon fill="#181818" points="1244.9033,595.0332,1254.9033,599.0332,1244.9033,603.0332,1248.9033,599.0332" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="642.1323" x2="1250.9033" y1="599.0332" y2="599.0332"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="520.0762" x="649.1323" y="594.291">SendNotification(ctx, &amp;blockchain.Notification{Type: NotificationType_Subtree, ...})</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1432.2446" y1="629.0332" y2="629.0332"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="102.7813" x="25" y="639.668">[if in RemoveMap]</text><polygon fill="#181818" points="1364.0449,660.2988,1374.0449,664.2988,1364.0449,668.2988,1368.0449,664.2988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="105.6216" x2="1370.0449" y1="664.2988" y2="664.2988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.1523" x="112.6216" y="659.5566">Delete(txReq.node.Hash)</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="154.8389" x="0" y="768.4551">Last Modified On: 14-Nov-2024</text><!--SRC=[ZLHHZzCm37xlhx0gWLffA- -JGE862AJh0Tia7W2XhF5eHDRq4dUiGlnttBHTssrtNAGgZcD_jZ-xAOKbbQbI50JXkjgIHVnaJORE6Hk2S31I1lSLLWZXvsRpbvkZbmCiI54DuRAobkN6QSDEtYPhTHrEK8uZtcYJ_OBNpk5-gsjOeprW5zQBK-iEOat6jj1UkeAOvK8LIwquhBSRb84K9BR2SHKht9i3GYfARzCU-HG4sfWo05vTUJ1_DQO15a375Tx3I_2491Bz7Xs4LlATDVjKQQrSx376Zenp2iCeRu_AaOiyM58OYSbxuVBMJMW2jOF2y5QCaeDkdS5EqnDItZ7S27a6Ew4TnYT_aP4w2C99Vny0dtQGyLzBsHtEmiHFXlZWbcPVQYIC1gSpg_abxvQxyQAj9HXgQRdgtPI37ljaSeqoFs4CkiP2deV-Lb1kJVKpXm9_TyfbBee9eCH7MPpItCxp99ysWIQLPew7WSZeE0FN8YOhOwWPYoZ-klWUJm6ystnSIul053M3W_uGJ1EQSYKDki5sOdaznJNI8_cTr3SrePk1AKcPmYLV5EMRpMtKtR8OnnV1-jIGkC5Akmk3iupwcdaQWKmVUOLawwPLi3CMD7DlmJQw2pZa8Ue3kYhB4EN_OWuFIJStTuRKJcMYARFbvVdsP9ECR_ziwX8NC5OrcXzT9sQG9CdVIr8uHl3GkPVxGfxoK8pVdpVe_x-hxq-3tNo1nXttWvlC3DmAHv0QoHMWX8_50fxnUufHAEKyJTDvpIkCWty0]--></g></svg>
