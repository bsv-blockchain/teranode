<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="878px" preserveAspectRatio="none" style="width:1025px;height:878px;background:#F0F8FF;" version="1.1" viewBox="0 0 1025 878" width="1025px" zoomAndPan="magnify"><defs/><g><rect fill="#F0F8FF" height="878" style="stroke:none;stroke-width:1.0;" width="1025" x="0" y="0"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="58.1895" y="219.3516"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="58.1895" y="302.2832"/><rect fill="#FFFFFF" height="35.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="415.7207" y="83.1094"/><rect fill="#FFFFFF" height="618.9004" style="stroke:#181818;stroke-width:1.0;" width="10" x="614.8779" y="190.041"/><rect fill="#FFFFFF" height="124.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="619.8779" y="634.3887"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="840.8691" y="427.5254"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="949.1016" y="576.0781"/><rect fill="none" height="532.2793" style="stroke:#000000;stroke-width:1.5;" width="1009.8647" x="10" y="263.6621"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="359.748" x="548.5903" y="388.9043"/><rect fill="none" height="60.6211" style="stroke:#000000;stroke-width:1.5;" width="461.2744" x="548.5903" y="537.457"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="359.748" x="548.5903" y="654.3887"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="63" x2="63" y1="36.4883" y2="826.9414"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="420.2969" x2="420.2969" y1="36.4883" y2="826.9414"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="619.5903" x2="619.5903" y1="36.4883" y2="826.9414"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="845.3999" x2="845.3999" y1="36.4883" y2="826.9414"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="953.3384" x2="953.3384" y1="36.4883" y2="826.9414"/><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="86.3789" x="20" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.3789" x="27" y="25.5352">Blockchain</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="86.3789" x="20" y="825.9414"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.3789" x="27" y="846.4766">Blockchain</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="168.8477" x="336.2969" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154.8477" x="343.2969" y="25.5352">Block Validation Server</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="168.8477" x="336.2969" y="825.9414"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154.8477" x="343.2969" y="846.4766">Block Validation Server</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="122.5752" x="558.5903" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.5752" x="565.5903" y="25.5352">Block Validation</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="122.5752" x="558.5903" y="825.9414"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.5752" x="565.5903" y="846.4766">Block Validation</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="104.9385" x="793.3999" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.9385" x="800.3999" y="25.5352">Subtree Store</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="104.9385" x="793.3999" y="825.9414"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.9385" x="800.3999" y="846.4766">Subtree Store</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="91.5264" x="908.3384" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5264" x="915.3384" y="25.5352">UTXO Store</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="91.5264" x="908.3384" y="825.9414"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5264" x="915.3384" y="846.4766">UTXO Store</text><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="58.1895" y="219.3516"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="58.1895" y="302.2832"/><rect fill="#FFFFFF" height="35.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="415.7207" y="83.1094"/><rect fill="#FFFFFF" height="618.9004" style="stroke:#181818;stroke-width:1.0;" width="10" x="614.8779" y="190.041"/><rect fill="#FFFFFF" height="124.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="619.8779" y="634.3887"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="840.8691" y="427.5254"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="949.1016" y="576.0781"/><polygon fill="#666666" points="403.7207,79.1094,413.7207,83.1094,403.7207,87.1094,407.7207,83.1094" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="63.1895" x2="409.7207" y1="83.1094" y2="83.1094"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="329.418" x="70.1895" y="63.0566">SendNotification(NotificationType_BlockSubtreesSet,</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.8384" x="70.1895" y="78.3672">blockHashBytes)</text><line style="stroke:#666666;stroke-width:1.0;" x1="425.7207" x2="467.7207" y1="117.4199" y2="117.4199"/><line style="stroke:#666666;stroke-width:1.0;" x1="467.7207" x2="467.7207" y1="117.4199" y2="130.4199"/><line style="stroke:#666666;stroke-width:1.0;" x1="420.7207" x2="467.7207" y1="130.4199" y2="130.4199"/><polygon fill="#666666" points="430.7207,126.4199,420.7207,130.4199,430.7207,134.4199,426.7207,130.4199" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.4805" x="432.7207" y="112.6777">Enqueue to setMinedChan</text><path d="M425,138.4199 L425,163.4199 L746,163.4199 L746,148.4199 L736,138.4199 L425,138.4199 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M736,138.4199 L736,148.4199 L746,148.4199 L736,138.4199 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="300.3774" x="431" y="155.9883">Background goroutine processes setMinedChan</text><polygon fill="#666666" points="602.8779,186.041,612.8779,190.041,602.8779,194.041,606.8779,190.041" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="420.7207" x2="608.8779" y1="190.041" y2="190.041"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.1572" x="427.7207" y="185.2988">setTxMined(ctx, blockHash)</text><polygon fill="#666666" points="79.1895,215.3516,69.1895,219.3516,79.1895,223.3516,75.1895,219.3516" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="73.1895" x2="613.8779" y1="219.3516" y2="219.3516"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.6543" x="85.1895" y="214.6094">GetBlockExists(ctx, blockHash)</text><polygon fill="#666666" points="602.8779,244.6621,612.8779,248.6621,602.8779,252.6621,606.8779,248.6621" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63.1895" x2="608.8779" y1="248.6621" y2="248.6621"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.2515" x="70.1895" y="243.9199">exists / not exists</text><path d="M10,263.6621 L72.1387,263.6621 L72.1387,270.9727 L62.1387,280.9727 L10,280.9727 L10,263.6621 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="532.2793" style="stroke:#000000;stroke-width:1.5;" width="1009.8647" x="10" y="263.6621"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="25" y="277.2305">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="122.2622" x="87.1387" y="276.2969">[Block does not exist]</text><polygon fill="#666666" points="79.1895,298.2832,69.1895,302.2832,79.1895,306.2832,75.1895,302.2832" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="73.1895" x2="613.8779" y1="302.2832" y2="302.2832"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.7617" x="85.1895" y="297.541">GetBlock(ctx, blockHash)</text><polygon fill="#666666" points="602.8779,327.5938,612.8779,331.5938,602.8779,335.5938,606.8779,331.5938" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63.1895" x2="608.8779" y1="331.5938" y2="331.5938"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.4775" x="70.1895" y="326.8516">Block</text><line style="stroke:#666666;stroke-width:1.0;" x1="624.8779" x2="666.8779" y1="360.9043" y2="360.9043"/><line style="stroke:#666666;stroke-width:1.0;" x1="666.8779" x2="666.8779" y1="360.9043" y2="373.9043"/><line style="stroke:#666666;stroke-width:1.0;" x1="625.8779" x2="666.8779" y1="373.9043" y2="373.9043"/><polygon fill="#666666" points="635.8779,369.9043,625.8779,373.9043,635.8779,377.9043,631.8779,373.9043" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.96" x="631.8779" y="356.1621">Ensure all subtrees are loaded</text><path d="M548.5903,388.9043 L623.0371,388.9043 L623.0371,396.2148 L613.0371,406.2148 L548.5903,406.2148 L548.5903,388.9043 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="359.748" x="548.5903" y="388.9043"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="563.5903" y="402.4727">loop</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="202.3345" x="638.0371" y="401.5391">[for each subtree hash in the block]</text><polygon fill="#666666" points="828.8691,423.5254,838.8691,427.5254,828.8691,431.5254,832.8691,427.5254" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="624.8779" x2="834.8691" y1="427.5254" y2="427.5254"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.646" x="631.8779" y="422.7832">Get(ctx, subtreeHash)</text><polygon fill="#666666" points="635.8779,452.8359,625.8779,456.8359,635.8779,460.8359,631.8779,456.8359" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="629.8779" x2="844.8691" y1="456.8359" y2="456.8359"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47.9185" x="641.8779" y="452.0938">Subtree</text><polygon fill="#666666" points="74.1895,489.1465,64.1895,493.1465,74.1895,497.1465,70.1895,493.1465" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="68.1895" x2="613.8779" y1="493.1465" y2="493.1465"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238.0371" x="80.1895" y="488.4043">GetBlockHeaderIDs(ctx, blockHash, 1)</text><polygon fill="#666666" points="602.8779,518.457,612.8779,522.457,602.8779,526.457,606.8779,522.457" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63.1895" x2="608.8779" y1="522.457" y2="522.457"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47.6646" x="70.1895" y="517.7148">blockID</text><path d="M548.5903,537.457 L623.0371,537.457 L623.0371,544.7676 L613.0371,554.7676 L548.5903,554.7676 L548.5903,537.457 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="60.6211" style="stroke:#000000;stroke-width:1.5;" width="461.2744" x="548.5903" y="537.457"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="563.5903" y="551.0254">loop</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="285.9302" x="638.0371" y="550.0918">[for each batch of tx hashes in the block subtrees]</text><polygon fill="#666666" points="937.1016,572.0781,947.1016,576.0781,937.1016,580.0781,941.1016,576.0781" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="624.8779" x2="943.1016" y1="576.0781" y2="576.0781"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273.6411" x="631.8779" y="571.3359">SetMinedMulti(ctx, txBatchHashes, blockID)</text><polygon fill="#666666" points="635.8779,586.0781,625.8779,590.0781,635.8779,594.0781,631.8779,590.0781" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="629.8779" x2="953.1016" y1="590.0781" y2="590.0781"/><line style="stroke:#666666;stroke-width:1.0;" x1="624.8779" x2="671.8779" y1="621.3887" y2="621.3887"/><line style="stroke:#666666;stroke-width:1.0;" x1="671.8779" x2="671.8779" y1="621.3887" y2="634.3887"/><line style="stroke:#666666;stroke-width:1.0;" x1="630.8779" x2="671.8779" y1="634.3887" y2="634.3887"/><polygon fill="#666666" points="640.8779,630.3887,630.8779,634.3887,640.8779,638.3887,636.8779,634.3887" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191.9912" x="636.8779" y="616.6465">updateSubtreesTTL(ctx, block)</text><path d="M548.5903,654.3887 L623.0371,654.3887 L623.0371,661.6992 L613.0371,671.6992 L548.5903,671.6992 L548.5903,654.3887 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="359.748" x="548.5903" y="654.3887"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="563.5903" y="667.957">loop</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="171.2788" x="638.0371" y="667.0234">[for each Subtree in the Block]</text><polygon fill="#666666" points="833.8691,689.0098,843.8691,693.0098,833.8691,697.0098,837.8691,693.0098" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="629.8779" x2="839.8691" y1="693.0098" y2="693.0098"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.0718" x="636.8779" y="688.2676">SetTTL(ctx, subtreeHash, 0)</text><polygon fill="#666666" points="640.8779,718.3203,630.8779,722.3203,640.8779,726.3203,636.8779,722.3203" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="634.8779" x2="844.8691" y1="722.3203" y2="722.3203"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.5117" x="646.8779" y="717.5781">TTL set to 0</text><polygon fill="#666666" points="74.1895,754.6309,64.1895,758.6309,74.1895,762.6309,70.1895,758.6309" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="68.1895" x2="613.8779" y1="758.6309" y2="758.6309"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228.0205" x="80.1895" y="753.8887">SetBlockSubtreesSet(ctx, blockHash)</text><polygon fill="#666666" points="74.1895,783.9414,64.1895,787.9414,74.1895,791.9414,70.1895,787.9414" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="68.1895" x2="613.8779" y1="787.9414" y2="787.9414"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211.9229" x="80.1895" y="783.1992">SetBlockMinedSet(ctx, blockHash)</text><polygon fill="#666666" points="431.7207,804.9414,421.7207,808.9414,431.7207,812.9414,427.7207,808.9414" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="425.7207" x2="618.8779" y1="808.9414" y2="808.9414"/><text fill="#333333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="155.4346" x="0" y="868.0977">Last Modified On: 24-Feb-2025</text><!--SRC=[fLLDRzim3BthLn0PXZL0YdKOC0mzx92cMGiqwo5PiSE0GR6OMgWhPHBJ9HZstqVBNxBhfitcGsBIv2FvI57-JfkrTF8UbZAvktLsOzIPpQo3LzEJwSVfLFZQGk5ARZAQMaEboVlmH2RIEVkh_FWXF4AyWGckj45OMgVGULZnLvbbW1dUeo4V-REeQGU_1S0uMBUnMDlDSX8UyKT4A0bdw6pslp3yIphHQsdetw24Y246uymcTqagjHc0zD28FMPm8pEj96bhO8xk0LtXSrC8-pqQ-4RNzfXlbkGGOKxMOJ0lDK7Hjlsw-7OT6UPYOIMQ2k3uKvtRAITir1TBUgMJ4Fie5XQxDVu8dcL8FqSQmNUpp7KNqgVZ7Q4V2fcGVf24JT6YUck7EpS_DxX180iUQSQZfivIQOJ27WXZMNJwDYMmgqOVzn5kBVzJFh9hPnFq7dqRcUk37AYJKPlnqzndiGrUHmbjHr1N61VNQPFeA6hWmFCfV4OAulbMU_BFu1RJ5RUfBqqCKF0sBwaKMjmrI49cLCYWB9DIEp1_02_C_57EkMzVj1fpJ-v14IoVo7XVOZ7GkV4RXs4l-N8kUPiXP5OgL0LEPkqwR2yEbLPca78HmFbHYaLLmVQ9kF4n2vGKR9HO3HyjJbfdi_eQA_kvAIrgZuYXHuWyqUAG9buWq-8k9zq97C6xuOiQ5pmk9tt4BYNnBvzEsWPokHCnlNL_zl5SRwby6nKdTyPtboxIfUquZt4Hm4TLBZtCDykk-bHh-ihgexeDyIpFCKURDRzXjIONYwk8xBvZqqcapMgryaignuTDAfDOnu-6TGGdmmCcaY7ofPXlwfEQZXTCtRoSkkZ6wDqYtHqGxzK3meHnwOiHklS89BgCnBuCCbmHzuFl3GTNqXFChE9h4HLSS_3NUQ-F1aeTpsQpunq_Ww7u2m00]--></g></svg>
